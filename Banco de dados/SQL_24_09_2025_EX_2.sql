CREATE DATABASE IF NOT EXISTS BD_ALUGUEL_PRODUTOS;
USE BD_ALUGUEL_PRODUTOS;

CREATE TABLE IF NOT EXISTS CLIENTE(
	CLIENTE_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
	EMAIL VARCHAR (255) NOT NULL,
    CPF VARCHAR (255) NOT NULL,
    NOME VARCHAR(500) NOT NULL,
    TELEPHONE VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS PRODUTO(
	PRODUTO_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(500) NOT NULL,
	DESCRICAO VARCHAR (255) NOT NULL,
    PRECO DECIMAL NOT NULL,
    QTD_DISPONIVEL INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS ALUGUEL(
	ALUGUEL_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
	DATA_ALUGUEL DATE NOT NULL,
    DATA_DEVOLUCAO DATE NOT NULL,
    VALOR_TOTAL DECIMAL NOT NULL,
    FK_CLIENTE_ID INTEGER NOT NULL,
    FK_PRODUTO_ID INTEGER NOT NULL,
    FOREIGN KEY (FK_CLIENTE_ID) REFERENCES CLIENTE(CLIENTE_ID) ON DELETE CASCADE,
    FOREIGN KEY (FK_PRODUTO_ID) REFERENCES PRODUTO(PRODUTO_ID) ON DELETE CASCADE
);

-- DML - LINGUAGEM DE MANIPULAÇÃO
-- INSERT - INSERT
INSERT INTO CLIENTE (EMAIL,TELEPHONE,CPF,NOME)
VALUES ("email@email.com","19999999999","123456789","leo");

INSERT INTO CLIENTE (EMAIL,TELEPHONE,CPF,NOME)
VALUES ("anthony.azevedo@email.com","19999999999","49227279814","Anthony");

INSERT INTO cliente (NOME,EMAIL,TELEPHONE, CPF)
VALUES ("Gbriel","gabriel@email.com","1999999999","1234849");

-- SELECT - SELECIONAR
SELECT * FROM CLIENTE;

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("MacBook M4","Notebook Apple",4789.90,5);

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Apple iPhone 16e","Celular apple",4.434,18);

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("AirPods 4","Fones de ouvido sem fio",894,7);

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("iPad","Tablet versátil para estudar",2.514,20);

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Mac Studio M3 Ultra","Computador de mesa",30.594,3);

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Mac mini M4","Mini desktop compacto",4.374,22);

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Apple TV 4K","Dispositivo para transformar qualquer TV em uma Smart TV com 4K",41.014,7);

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Mac Studio","Outra versão do desktop",30.594,18);

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("iPad","Tablet de entrada com tela grande",2.514,98);

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Apple Watch Series 10","Relógio inteligente",2.694,68);

SELECT * FROM PRODUTO;

-- INSERIR ALUGUEIS
SELECT * FROM CLIENTE;
SELECT * FROM PRODUTO;

INSERT INTO ALUGUEL ( DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ( "2025-09-24","2025-10-01",7890,1,20);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2026-09-25","2025-10-02",7890,2,19);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2027-09-26","2025-10-03",1000,3,18);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2028-09-27","2025-10-04",1000,4,17);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-09-28","2025-10-05",1000,5,16);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-09-29","2025-10-06",1000,6,15);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-09-30","2025-10-07",1000,7,14);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-01","2025-10-08",1000,8,13);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-02","2025-10-09",1000,9,12);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-03","2025-10-10",1000,10,11);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-04","2025-10-11",1000,11,10);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-05","2025-10-12",1000,12,9);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-06","2025-10-13",1000,13,8);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-07","2025-10-14",1000,14,7);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-08","2025-10-15",1000,15,6);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-09","2025-10-16",1000,16,5);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-10","2025-10-17",1000,17,4);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-11","2025-10-18",1000,18,3);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-12","2025-10-19",1000,19,2);

INSERT INTO ALUGUEL (DATA_ALUGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-10-13","2025-10-20",1000,20,1);

SELECT * FROM ALUGUEL;
SELECT * FROM PRODUTO;

-- ATUALIZAR UM REGISTRO (UPDATE)
UPDATE PRODUTO
SET PRECO = 3500
WHERE PRODUTO_ID=1;

UPDATE PRODUTO
SET PRECO = 15.000
WHERE PRODUTO_ID = 2;

UPDATE PRODUTO
SET PRECO = 18.000
WHERE PRODUTO_ID = 3;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 15
WHERE PRODUTO_ID = 1;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 18
WHERE PRODUTO_ID = 2;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 12
WHERE PRODUTO_ID = 3;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 19
WHERE PRODUTO_ID = 4;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 21
WHERE PRODUTO_ID = 5;

UPDATE CLIENTE
SET EMAIL = "Julia.barbosa@gmail.com"
WHERE CLIENTE_ID = 1;

UPDATE CLIENTE
SET EMAIL = "Geusiane.barbosa@gmail.com"
WHERE CLIENTE_ID = 2;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-02-01"
WHERE ALUGUEL_ID = 1;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-02-02"
WHERE ALUGUEL_ID = 2;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-02-03"
WHERE ALUGUEL_ID = 3;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-02-04"
WHERE ALUGUEL_ID = 4;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-02-05"
WHERE ALUGUEL_ID = 5;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-02-06"
WHERE ALUGUEL_ID = 6;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-02-07"
WHERE ALUGUEL_ID = 7;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-02-08"
WHERE ALUGUEL_ID = 8;

-- APAGAR UM REGISTRO (DELETE)
DELETE FROM CLIENTE 
WHERE CLIENTE_ID = 1;

DELETE FROM PRODUTO
WHERE PRODUTO_ID = 4;


DELETE FROM ALUGUEL 
WHERE CLIENTE_ID = 3;

SELECT *
FROM CLIENTE
WHERE CLIENTE_ID = 2;

SELECT NOME,PRECO
FROM PRODUTO
WHERE PRODUTO_ID = 3;